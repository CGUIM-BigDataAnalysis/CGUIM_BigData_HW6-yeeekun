zoom = 15,
##language = "zh-TW"
)
ggmap(twmap)
## 經緯度輸入方法
TaipeiMap <- get_map(location = c(121.43,24.93,121.62,25.19),
zoom = 11,
maptype = 'roadmap'
)
ggmap(TaipeiMap)
## 讀入並整理水資源資料
library(jsonlite)
library(RCurl)
WaterData<-fromJSON(
getURL("http://data.taipei/opendata/datalist/apiAccess?scope=resourceAquire&rid=190796c8-7c56-42e0-8068-39242b8ec927"))
WaterDataFrame<-WaterData$result$results
## 轉換經緯度、濁度的資料型態為數字方便使用
WaterDataFrame$longitude<-as.numeric(WaterDataFrame$longitude)
WaterDataFrame$latitude<-as.numeric(WaterDataFrame$latitude)
WaterDataFrame$qua_cntu<-as.numeric(WaterDataFrame$qua_cntu)
## 保留水質濁度>=0的資料 (去除負值)
WaterDataClean<-WaterDataFrame[WaterDataFrame$qua_cntu>=0,]
head(WaterDataClean)
## 疊上一層點分布圖
TaipeiMapO <- ggmap(TaipeiMap)+
geom_point(data=WaterDataClean,
aes(x=longitude, y=latitude,
color=qua_cntu,size=3.5))+
scale_color_continuous(
low = "yellow",high = "red")+
guides(size=FALSE)
TaipeiMapO
## 抓桃園的GOOGLE圖層
TaoMap <- get_map(location = c(121.388539,25.034225,121.390539,25.036225),
zoom = 11,
language = "zh-TW"
)
TaoMap
ggmap(TaoMap)
## 用點標出特定地點(ex.長庚大學)
Taoselect <- ggmap(TaoMap)+
geom_point(aes(x=121.389539,
y=25.035225,
size=3
),color="blue"
)+
guides(size=FALSE)
Taoselect
install.packages("ggmap")
install.packages("jsonlite")
install.packages("jsonlite")
install.packages("RCurl")
## 地名輸入測試
##install.packages('ggmap')
library(ggmap)
twmap <- get_map(location = 'Taipei,Tuchen,Haishan',
zoom = 15,
##language = "zh-TW"
)
ggmap(twmap)
## 經緯度輸入方法
TaipeiMap <- get_map(location = c(121.43,24.93,121.62,25.19),
zoom = 11,
maptype = 'roadmap'
)
ggmap(TaipeiMap)
## 讀入並整理水資源資料
library(jsonlite)
library(RCurl)
WaterData<-fromJSON(
getURL("http://data.taipei/opendata/datalist/apiAccess?scope=resourceAquire&rid=190796c8-7c56-42e0-8068-39242b8ec927"))
WaterDataFrame<-WaterData$result$results
## 轉換經緯度、濁度的資料型態為數字方便使用
WaterDataFrame$longitude<-as.numeric(WaterDataFrame$longitude)
WaterDataFrame$latitude<-as.numeric(WaterDataFrame$latitude)
WaterDataFrame$qua_cntu<-as.numeric(WaterDataFrame$qua_cntu)
## 保留水質濁度>=0的資料 (去除負值)
WaterDataClean<-WaterDataFrame[WaterDataFrame$qua_cntu>=0,]
head(WaterDataClean)
## 疊上一層點分布圖
TaipeiMapO <- ggmap(TaipeiMap)+
geom_point(data=WaterDataClean,
aes(x=longitude, y=latitude,
color=qua_cntu,size=3.5))+
scale_color_continuous(
low = "yellow",high = "red")+
guides(size=FALSE)
TaipeiMapO
## 抓桃園的GOOGLE圖層
TaoMap <- get_map(location = c(121.388539,25.034225,121.390539,25.036225),
zoom = 11,
language = "zh-TW"
)
TaoMap
ggmap(TaoMap)
## 用點標出特定地點(ex.長庚大學)
Taoselect <- ggmap(TaoMap)+
geom_point(aes(x=121.389539,
y=25.035225,
size=3
),color="blue"
)+
guides(size=FALSE)
Taoselect
library(readr)
TripleZone <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_TripleZone_20170217.csv")
library(readr)
TripleZone <- read.csv("D:/BigDataHW/HW6/105_TripleZone_20170217.csv")
library(readr)
TripleZone <- read.csv("D:/BigDataHW/HW6/105_TripleZone_20170217.csv")
View(TripleZone)
View(TripleZone)
library(readr)
Banqiao <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Banqiao_20170217.csv")
Linkou <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Linkou_20170217.csv")
Sanchong <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Sanchong_20170217.csv")
Tanshui <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tanshui_20170217.csv")
Tucheng <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tucheng_20170217.csv")
WanLi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_WanLi_20170217.csv")
Xinzhuang <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xinzhuang_20170217.csv")
Xizhi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xizhi_20170217.csv")
NewTaipeiFactoryLocation <- read.csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188")
library(readr)
Banqiao <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Banqiao_20170217.csv")
Linkou <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Linkou_20170217.csv")
Sanchong <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Sanchong_20170217.csv")
Tanshui <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tanshui_20170217.csv")
Tucheng <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tucheng_20170217.csv")
WanLi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_WanLi_20170217.csv")
Xinzhuang <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xinzhuang_20170217.csv")
Xizhi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xizhi_20170217.csv")
library(readr)
Banqiao <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Banqiao_20170217.csv")
Linkou <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Linkou_20170217.csv")
Sanchong <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Sanchong_20170217.csv")
Tanshui <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tanshui_20170217.csv")
Tucheng <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tucheng_20170217.csv")
WanLi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_WanLi_20170217.csv")
Xinzhuang <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xinzhuang_20170217.csv")
Xizhi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xizhi_20170217.csv")
NewTaipeiFactoryLocation <- read.csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
NewTaipeiFactoryLocation <- read.csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv",encoding = "big5")
library(readr)
NewTaipeiFactoryLocation <- read.csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv",encoding = "big5")
library(readr)
NewTaipeiFactoryLocation <- read.csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv",encoding = "UTF-8")
library(readr)
NewTaipeiFactoryLocation <- read.table("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv",seq=",")
library(readr)
NewTaipeiFactoryLocation <- read.table("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv",seq=',')
library(readr)
NewTaipeiFactoryLocation <- read.table("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
library(readr)
NewTaipeiFactoryLocation <- read.delim("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
library(readr)
NewTaipeiFactoryLocation <- read.csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
library(readr)
Banqiao <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Banqiao_20170217.csv")
Linkou <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Linkou_20170217.csv")
Sanchong <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Sanchong_20170217.csv")
Tanshui <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tanshui_20170217.csv")
Tucheng <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tucheng_20170217.csv")
WanLi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_WanLi_20170217.csv")
Xinzhuang <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xinzhuang_20170217.csv")
Xizhi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xizhi_20170217.csv")
NewTaipeiFactoryLocation <- read.csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
library(readr)
Banqiao <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Banqiao_20170217.csv")
Linkou <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Linkou_20170217.csv")
Sanchong <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Sanchong_20170217.csv")
Tanshui <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tanshui_20170217.csv")
Tucheng <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tucheng_20170217.csv")
WanLi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_WanLi_20170217.csv")
Xinzhuang <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xinzhuang_20170217.csv")
Xizhi <- read.csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xizhi_20170217.csv")
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
View(NewTaipeiFactoryLocation)
View(NewTaipeiFactoryLocation)
library(readr)
Banqiao <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Banqiao_20170217.csv")
Linkou <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Linkou_20170217.csv")
Sanchong <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Sanchong_20170217.csv")
Tanshui <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tanshui_20170217.csv")
Tucheng <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Tucheng_20170217.csv")
WanLi <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_WanLi_20170217.csv")
Xinzhuang <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xinzhuang_20170217.csv")
Xizhi <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Xizhi_20170217.csv")
FactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
View(Linkou)
View(Banqiao)
View(FactoryLocation)
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$日期),],    Linkou[grepl("2016/12/31",Linkou$日期),],                                                Sanchong[grepl("2016/12/31",Sanchong$日期),],  Tanshui[grepl("2016/12/31",Tanshui$日期),],                                              Tucheng[grepl("2016/12/31",Tucheng$日期),],    WanLi[grepl("2016/12/31",WanLi$日期),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$日期),],Xizhi[grepl("2016/12/31",Xizhi$日期),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE)
View(AirPollution.20160231)
library(readr)
Pollution <- read.csv("C:/Users/Ray/Downloads/new/Allpollution")
Location_factory <-
read_csv("C:/Users/Ray/Downloads/new/Factory.csv")
View(Location_factory)
Pollution <- read.csv("C:/Users/Ray/Downloads/new/Allpollution.csv")
View(Pollution)
View(Pollution)
View(Pollution)
View(Pollution)
View(Pollution)
Pollution <- read_csv("C:/Users/Ray/Downloads/new/Allpollution.csv")
View(Pollution)
Banqiao <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105_Banqiao_20170217.csv")
Pollution <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xml")
Pollution <- read_csv("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
View(Pollution)
View(Pollution)
View(Pollution)
Pollution <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
library(readxl)
Pollution <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
View(Pollution)
Pollution <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
Linkou <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年林口站_20170217.xls")
Sanchong <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年三重站_20170217.xls")
Tanshui <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年淡水站_20170217.xls")
Tucheng <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年土城站_20170217.xls")
WanLi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年萬里站_20170217.xls")
Xinzhuang <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年新莊站_20170217.xls")
Xizhi <- read_excelv("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
View(Pollution)
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$日期),],    Linkou[grepl("2016/12/31",Linkou$日期),],                                                Sanchong[grepl("2016/12/31",Sanchong$日期),],  Tanshui[grepl("2016/12/31",Tanshui$日期),],                                              Tucheng[grepl("2016/12/31",Tucheng$日期),],    WanLi[grepl("2016/12/31",WanLi$日期),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$日期),],Xizhi[grepl("2016/12/31",Xizhi$日期),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE)
View(AirPollution.20160231)
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE)
View(AirPollution.20160231)
View(Xizhi)
Xizhi <- read_excelv("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
Xizhi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE)
View(AirPollution.20160231)
library(readr)
library(readxl)
Pollution <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
Linkou <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年林口站_20170217.xls")
Sanchong <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年三重站_20170217.xls")
Tanshui <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年淡水站_20170217.xls")
Tucheng <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年土城站_20170217.xls")
WanLi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年萬里站_20170217.xls")
Xinzhuang <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年新莊站_20170217.xls")
Xizhi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE)
View(AirPollution.20160231)
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE)
View(AirPollution.20160231)
irPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
View(AirPollution.20160231)
View(Banqiao)
AirPollution.20160231 <- rbind(Banqiao[grepl("2016-12-31",Banqiao$`日期`),],    Linkou[grepl("2016-12-31",Linkou$`日期`),],                                                Sanchong[grepl("2016-12-31",Sanchong$`日期`),],  Tanshui[grepl("2016-12-31",Tanshui$`日期`),],                                              Tucheng[grepl("2016-12-31",Tucheng$`日期`),],
WanLi[grepl("2016-12-31",WanLi$`日期`),],
Xinzhuang[grepl("2016-12-31",Xinzhuang$`日期`),],
Xizhi[grepl("2016-12-31",Xizhi$`日期`),])
View(AirPollution.20160231)
View(Banqiao)
library(readr)
library(readxl)
Pollution <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
Linkou <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年林口站_20170217.xls")
Sanchong <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年三重站_20170217.xls")
Tanshui <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年淡水站_20170217.xls")
Tucheng <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年土城站_20170217.xls")
WanLi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年萬里站_20170217.xls")
Xinzhuang <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年新莊站_20170217.xls")
Xizhi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
View(Linkou)
View(Pollution)
View(Xinzhuang)
View(Xinzhuang)
View(Xizhi)
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
Banqiao <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
Linkou <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年林口站_20170217.xls")
Sanchong <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年三重站_20170217.xls")
Tanshui <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年淡水站_20170217.xls")
Tucheng <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年土城站_20170217.xls")
WanLi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年萬里站_20170217.xls")
Xinzhuang <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年新莊站_20170217.xls")
Xizhi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
library(readxl)
Banqiao <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
Linkou <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年林口站_20170217.xls")
Sanchong <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年三重站_20170217.xls")
Tanshui <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年淡水站_20170217.xls")
Tucheng <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年土城站_20170217.xls")
WanLi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年萬里站_20170217.xls")
Xinzhuang <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年新莊站_20170217.xls")
Xizhi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
View(AirPollution.20160231)
View(AirPollution.20160231)
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE)
View(AirPollution.20160231)
AirPollution.20160231$Average<- round(rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE),2)
View(AirPollution.20160231)
View(NewTaipeiFactoryLocation)
factory_t <- rbind(NewTaipeiFactoryLocation[grepl("%汐止%",NewTaipeiFactoryLocation$FACT_ADDR),])
View(factory_t)
factory_t <- rbind(NewTaipeiFactoryLocation[pmatch("%汐止%",NewTaipeiFactoryLocation$FACT_ADDR),])
View(factory_t)
factory_t <- rbind(NewTaipeiFactoryLocation[grep("%汐止%",NewTaipeiFactoryLocation$FACT_ADDR),])
View(factory_t)
factory_t <- rbind(NewTaipeiFactoryLocation[grep("汐止",NewTaipeiFactoryLocation$FACT_ADDR),])
factory_t <- rbind(NewTaipeiFactoryLocation[grepl("汐止",NewTaipeiFactoryLocation$FACT_ADDR),])
View(AirPollution.20160231)
View(factory_t)
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
library(readr)
library(readxl)
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
factory_t <- rbind(NewTaipeiFactoryLocation[grepl("汐止",NewTaipeiFactoryLocation$FACT_ADDR),])
View(factory_t)
factory_t <- rbind(NewTaipeiFactoryLocation[grepl("汐止",NewTaipeiFactoryLocation$FACT_ADDR),])%>%
gsub(NewTaipeiFactoryLocation$FACT_ADDR,"汐止")
View(factory_t)
NewTaipeiFactoryLocation$FACT_ADDR<-gsub(NewTaipeiFactoryLocation$FACT_ADDR,"汐止")
NewTaipeiFactoryLocation$FACT_ADDR<-gsub(,"汐止")
factory_Xizhi <- rbind(NewTaipeiFactoryLocation[grepl("汐止",NewTaipeiFactoryLocation$FACT_ADDR),])
NewTaipeiFactoryLocation$FACT_ADDR<-"汐止"
View(factory_Xizhi)
factory_Xizhi <- rbind(NewTaipeiFactoryLocation[grepl("汐止",NewTaipeiFactoryLocation$FACT_ADDR),] & grepl("生產中",NewTaipeiFactoryLocation$STATUS),])
View(factory_Xizhi)
factory_operate <- rbind(grepl("生產中",NewTaipeiFactoryLocation$STATUS),])
factory_operate <- rbind(grepl("生產中",NewTaipeiFactoryLocation$STATUS),])
factory_operate <- rbind(NewTaipeiFactoryLocation[grepl("生產中",NewTaipeiFactoryLocation$STATUS),])
View(factory_operate)
View(NewTaipeiFactoryLocation)
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
View(NewTaipeiFactoryLocation)
factory_operate <- rbind(NewTaipeiFactoryLocation[grepl("生產中",NewTaipeiFactoryLocation$STATUS),])
View(factory_operate)
factory_Xizhi <- rbind(factory_operate[grepl("汐止",factory_operate$FACT_ADDR),])
View(factory_Xizhi)
factory_Xizhi$FACT_ADDR<-"汐止"
```{r}
library(readr)
library(readxl)
Banqiao <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年板橋站_20170217.xls")
Linkou <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年林口站_20170217.xls")
Sanchong <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年三重站_20170217.xls")
Tanshui <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年淡水站_20170217.xls")
Tucheng <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年土城站_20170217.xls")
WanLi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年萬里站_20170217.xls")
Xinzhuang <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年新莊站_20170217.xls")
Xizhi <- read_excel("D:/BigDataHW/HW6/NewTaipeiCity/105年汐止站_20170217.xls")
NewTaipeiFactoryLocation <- read_csv("D:/BigDataHW/HW6/NewTaipeiFactoryLocation_0002336861720153000188.csv")
AirPollution.20160231 <- rbind(Banqiao[grepl("2016/12/31",Banqiao$`日期`),],    Linkou[grepl("2016/12/31",Linkou$`日期`),],                                                Sanchong[grepl("2016/12/31",Sanchong$`日期`),],  Tanshui[grepl("2016/12/31",Tanshui$`日期`),],                                              Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- round(rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE),2)
##工廠清洗(抓八次)= =
factory_operate <- rbind(NewTaipeiFactoryLocation[grepl("生產中",NewTaipeiFactoryLocation$STATUS),])
factory_Xizhi <- rbind(factory_operate[grepl("汐止",factory_operate$FACT_ADDR),])
factory_Xizhi$FACT_ADDR<-"汐止"
View(AirPollution.20160231)
str(AirPollution.20160231
str(AirPollution.20160231)
str(AirPollution.20160231)
View(AirPollution.20160231)
AirPollution.20160231 <- rbind(
Banqiao[grepl("2016/12/31",Banqiao$`日期`),],
Linkou[grepl("2016/12/31",Linkou$`日期`),],
Sanchong[grepl("2016/12/31",Sanchong$`日期`),],
Tanshui[grepl("2016/12/31",Tanshui$`日期`),],
Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
View(AirPollution.20160231)
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231$Average<- round(rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE),2)
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231 <- rbind(
Banqiao[grepl("2016/12/31",Banqiao$`日期`),],
Linkou[grepl("2016/12/31",Linkou$`日期`),],
Sanchong[grepl("2016/12/31",Sanchong$`日期`),],
Tanshui[grepl("2016/12/31",Tanshui$`日期`),],
Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(as.character(AirPollution.20160231[,i]))
}
}
AirPollution.20160231 <- rbind(
Banqiao[grepl("2016/12/31",Banqiao$`日期`),],
Linkou[grepl("2016/12/31",Linkou$`日期`),],
Sanchong[grepl("2016/12/31",Sanchong$`日期`),],
Tanshui[grepl("2016/12/31",Tanshui$`日期`),],
Tucheng[grepl("2016/12/31",Tucheng$`日期`),],
WanLi[grepl("2016/12/31",WanLi$`日期`),],
Xinzhuang[grepl("2016/12/31",Xinzhuang$`日期`),],
Xizhi[grepl("2016/12/31",Xizhi$`日期`),])
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(AirPollution.20160231[,i])
}
}
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(AirPollution.20160231[,i])
}
}
AirPollution.20160231 <- as.data.frame(AirPollution.20160231)
for (i in 4:ncol(AirPollution.20160231)) {
if (!all(AirPollution.20160231[,i] %in% c("NR"," ","x","*","#"))) {
AirPollution.20160231[,i] <- as.numeric(AirPollution.20160231[,i])
}
}
AirPollution.20160231$Average<- round(rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE),2)
AirPollution.20160231$Average<- round(rowMeans(AirPollution.20160231[, 4:27],na.rm = TRUE),2)
AirPollution.20160231 <- AirPollution.20160231[order(AirPollution.20160231$`測項`, -AirPollution.20160231$Average),]
##工廠清洗
factory_operate <- NewTaipeiFactoryLocation[grepl("生產中",NewTaipeiFactoryLocation$STATUS),]
factory_operate$Area <- substr(factory_operate$FACT_ADDR,4,6)
#找出各區工廠數量，再以數量排序
library(dplyr)
factory_Area_Qunality <- group_by(factory_operate,Area)%>%summarise(nQuantity=n_distinct(FACT_NAME))
factory_Area_Qunality <- arrange(factory_Area_Qunality,desc(nQuantity))
View(factory_Area_Qunality)
View(Sanchong)
View(factory_operate)
View(factory_Xizhi)
View(factory_Area_Qunality)
View(AirPollution.20160231)
